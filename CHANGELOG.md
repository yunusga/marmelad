# История изменений

## WIP

- Добавлено обжатие JS/CSS файлов и замена на обжатые в HTML шаблонах
- Исправлены сили раскладка основного макета сайта

## [7.16.23] - 2020.09.19

- Обновлены зависимости
- Хеш подключаемых файлов обрезан до 24х символов
- добавленв команда [`mv <oldName> <newName> [options]`](README.md#mv-oldName-newName-options-переименование-блока) для переименования блоков

## [7.14.21] - 2020.09.12

- Обновлены зависимости
- Автоматические создание `.tci` если его нет (т.к. теперь `.tci` вне системы контроля Git)

## [7.13.15] - 2020.07.12

- Обновлены зависимости
- Добавлена настройка [**Анти-Scarf**](https://forweb.dev/ru/news/2020-scarf-analytics/) в `package.json`
- Доработана инициализация нового проекта **marmelad**
- Доработаны тесты инициализации нового проекта **marmelad**

## [7.12.13] - 2020.07.08

- Обновлены зависимости
- Доработана заготовка проекта
- Доработана инициализация нового проекта **marmelad**
- Добавлены глобальные свойства стилей для `img`

```stylus
img
  max-width 100%
  height auto
```

## [7.11.13] - 2020.06.24

- Обновил зависимости
- ESLint правки

## [7.10.11] - 2020.04.21

### Добавлено

#### Уведомления об ошибках сборки (бета)

- ОС уведомления
- Консоль браузера
- Попап в браузере

## [7.9.10] - 2020.03.10

### Добавлено

- сниппеты `include`,`_icon`, `incw` для NunJucks
- [PostCSS Viewport Height Correction](https://www.npmjs.com/package/postcss-viewport-height-correction) исправление `height:100vh` для правильной высоты вьюпорта

### Совместимость

- вернул совместимость со старыми проектами для `plugins.min.js` и `plugins.min.css`

### Фиксы

- Не работал ватчер за изменениями в iconizer

## WIP

- Отправка сообщения об ошибке в браузер (полное перекрытие страницы)
- Вывести `mmd lint` в отдельную функцию и переиспользовать в функционале и в команде
- Глобальные данные не доступны в `incw` в цикле
- Дополнить документацию по использованию `_icon` ф-ции, + опция `attrs` для пробрасывания кастомных атрибутов
- Не обновляются данные из `data.marmelad.js` после изменения файла
- Новые блоки через `TCI` не всегда утанавливаются как зависимости для страниц
- Обжатие и изменение подключения обжатых CSS, JS файлов для команды `mmd dist`
- Функция добавления классов на базе условия, для избавления от лишних условий


## [7.7.8] - 2020.01.10

- Добавил Консольное уведомление об обновлении версии **marmelad**
- `mmd dist` - убрал из исключений форматирования тег `span` по умолчанию в конфиге, для команды
- `mmd dist` - обновил `hasher` заменив сторнние зависимости на встроенные

## [7.6.7] - 2020.01.06

- оптимизация скорости старта `dev` команды, ускорение до 60%
- завуалировал время старта консольниымм сообщениями
- удалены лишние зависимости

## 6.10.4 <sup>06.07.2019</sup>

- Обновление jQuery до 3.4.1
- Добавлено поддержка копирования файлов с . в начале для папки marmelad/static
- Добавлено слежение за . (dot) файлами
- Добавлено в README информация об ошибке **Error: Missing positive glob** в `dev --proxy-mod` режиме
- Отключено авто открытие браузера для `dev --proxy-mod` режима по умолчанию

## 6.6.3 <sup>02.07.2019</sup>

- Добавил [`incw` расширение](README.md#incw-расширение) для **nunjucks**
- Добавил HTML код блока по умолчанию, при его создании

## 6.5.1 <sup>01.07.2019</sup>

- Фикс некорректной работы задачи дя сборки основных скриптов
- Фикс стрима изменений CSS вне зависимости от подключаемого файла `.min` или без
- `Lagman` сборка только тех страниц, которые указаны в зависимостях блока

## 6.2.1 <sup>27.06.2019</sup>

- Добавил вывод ошибок w3c валидатора в консоль
- Пофиксил ошибки от w3c валидатора в заготовке проекта

## 6.0.0 <sup>26.06.2019</sup>

- Добавил подсказку о лимите размера иконки спрайта (max 3kb)
- Заменил `autoprefixer.browsers` на `autoprefixer.overrideBrowserslist` в конфиге
- Добавил локальный w3c validator, команда `mmd lint` (alfa)
- Добавил опцию запуска --build для одноразовой сборки, без слежения
- Добавил режим --proxy-mod для сборки
- #56 добавил обжатие js/css с флагом --minify

## 5.8.9 <sup>13.06.2019</sup>

- Обновлены зависимости

## 5.6.7 <sup>04.04.2019</sup>

- #18 добавлена функция `_icon` для генерации иконок
- `<icon>` помечен как **устаревший**
- Апгрейд для 404й страницы
- Фикс CSS для правильного расчёта размеров в flex контейнерах
- Фикс `lagman` для Ubuntu

## 5.3.6 <sup>31.03.2019</sup>

- фикс отсутствия `latencyRoutes` в `settings.marmelad.js` для старых проектов
- удалён `<meta http-equiv="cleartype" content="on">` из заготовки
- удалён `package-lock.json` из git индекса
- обновлены зависимости `marmelad`

## 5.2.2 <sup>12.03.2019</sup>

- Добавил в конфиг дев-сервера возможность устанавливать задержку для определённых УРЛов
- Добавил пример для фейкового API в заготовку
- Добавил запуск сервера с парольной защитой

## 5.0.0 <sup>11.03.2019</sup>

Частично поломана обратная совместимость, если что-то не работает, смотрите соотвествующий раздел в README.md. Если в Readme ничего нет, создайте issue бага при переходе старых проектов на новую сборку.

- обновлена работа модуля **Iconizer** (миграция в README.md)
- добавлена `getSVGSpriteIcon(name, opts)` в `app.js` проекта, для генерации иконки из JS
- добавлен новый аргумент `--bootstrap` к инициализации проекта
- добавлен модуль оптимизации сборки шаблонов **lagman**
- упрощена и переработана заготовка проекта

## 4.55.31 <sup>07.01.2019</sup> 

- Удалены favicon.ico, apple-touch-icon.png и humans.txt из заготовки проекта (#47)
- Изменено подключение скриптов блоков в основной файл `app.js` без префикса `jquery.js`
- Фикс. падение сборки с ошибками в bootstrap scss (#25)
- Вынесены настройки postcssInlineSvg и postcssEasingGradients в settings.marmelad.js (#23, #24)
- Фикс. лишнего отступа у икноки как самостоятельной кнопки
- Обновлён bootstrap до 4.2.1
- Добавлен режим сборки bootstrap как донора
- Добавлены meta-тэги для соц. сетей
- Обновление README.md
- Добавил информацию для разработчиков
- Вынес функции для стилей в отдельную папку

## 4.46.29 <sup>04.12.2018</sup>

- Настройка слежения за файлами вынесена в конфиг т.к. `usePolling: true` сильно нагружает CPU, но, нужна очень редко
- Удалил .travis.yml
- Исправил .npmignore, для оптимизации размера модуля
- Обновлено README об установке с флагом --from-lock-file

## 4.45.27 <sup>03.12.2018</sup>

- Фикс. обновления глобальных данных для шаблонов

## 4.44.27 <sup>02.12.2018</sup>

- Добавлен postcss-easing-gradients
- Удалён postcss-focus
- Исправлены BEML сниппеты для sublime-text (mods атрибут модификатора)
- Добавлены BEML сниппеты для VS Code
- Обновлены `keywords` в `package.json`

## 4.42.24 <sup>30.11.2018</sup>

- Вернул bootstrap как донора
- Фикс. живое обновление данных для блоков
- Вернул пропавшее описание README
- Сменил определение версии как для разработчиков

## 4.40.22 <sup>29.11.2018</sup>

- Добавил вывод времени компиляции шаблонов
- Убрал cssnano из разработки
- Добавил postcss-inline-svg для стилей
- Добавил обработку задач в случае если бутстрап используется как донор

## 4.37.21 <sup>28.11.2018</sup>

- Фикс. конвертация названия данных блока в camelCase
- Добавил .editorconfig в заготовку проекта
- Добавил флаг инициализации стилей проекта
- Подправил конфиг автопрефиксера
- Удалены устаревшие задачи
- Адаптировал данные шаблонов и иконок под новый код
- Обновил README
- Вернул фильтр nunjucks bodyClass для обратной совместимости
- Фикс объединения данных для щаблонов

## 4.33.15 <sup>27.11.2018</sup>

- Фикс. путь до обновлённого бутстрапа в новом конфиге
- Добавил собственные данные для блоков

## 4.31.15 <sup>20.11.2018</sup>

- Добавлены тесты для инициализации проекта
- Фикс. проверки наличия файлов в директории инициализации (если директория не указана)
 
## 4.30.14 <sup>19.11.2018</sup>

- Фикс. запуска **bootstrap** задач
- Обновление **bootstrap** до `4.1.3`

## 4.29.13 <sup>18.11.2018</sup>

- Переделка CLI правил инициализации и работы с проектом
- Добавлена проверка от случайной перезаписи рабочего проекта
- Переезд на `gulp 4`
- Удаление лишних зависимостей
- Добавлен модуль TCI
- [nunjucks] Переименовал фильтр с limitTo в limitto
- [nunjucks] Заменил зависимости для фильтра translit

## 4.23.12 <sup>16.11.2018</sup>

- Удалил лишние зависимости
- Удалил `clipboardy`
- Обновил nunjucks до актуальной `3.1.4` версии
- Убрал лишнее из шаблонизатора (posthtml-postcss, pretty)
- Обновил README

## 4.20.11 <sup>15.11.2018</sup>

- Обновление зависимостей
- Обновление до babel 7
- Добавил иконку для README
- Обновил README
- Обновил описание в package.json и на GitHub

## 4.18.7 <sup>25.04.2018</sup>

- Обновление зависимостей
- Добавил скрипт для переустановки после обновлений `npm run refresh-deps`
- Обновление заготовки проекта (bootsrap 4.1.0, поддержка SCSS)
- Добавлена поддержка SCSS
- Добавил `gulp-sass-glob` для упрощения импорта
- Добавил `postcss-momentum-scrolling`

## 4.13.5 <sup>21.09.2017</sup>

- Обновление заготовки проекта, касается jquery slim
- Фикс. аргументов CLI, кириллица закралась в `-c`

## 4.12.4 <sup>20.09.2017</sup>

- спрятал `clipboardy` за флагом `-c --clipboard`
- обновление `autoprefixer` до `7.1.3`
- фиксы `beml` в шаблонах
- изменения внутренней логики работы со статикой

## 4.8.4 <sup>01.09.2017</sup>
- Обновлены зависимости
- Добавлена обработка и префиксер для инлайн стилей
- Добавлен фильтр `limitTo` для `nunjucks` шаблонов
- Замена `gulp-beml` на `posthtml-bem`

## 4.4.3 <sup>24.08.2017</sup>

- Переход на `YAML` в шаблонах
- Интеграция bootstrap 4.0.0-beta
- Мелкие правки по всему репизторию

## 4.2.1 <sup>22.08.2017</sup>

- Добавил форматироввание выходного `HTML`
- Подправил шаблон страицы

## 4.1.0 <sup>14.08.2017</sup>

- Переезд кода в `master` ветку

## 4.0.0 <sup>07.08.2017</sup>

- Начало стабилизации
